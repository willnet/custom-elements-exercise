<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Simple DOM example</title>
  <style>
    span {
      background: blue;
    }
  </style>
</head>

<body>
  <span>hogefuga</span>
  <popup-info text="hoge">aaa</popup-info>
  <script>
    class PopUpInfo extends HTMLElement {
      constructor() {
        super();
        var shadow = this.attachShadow({ mode: 'open' });
        var wrapper = document.createElement('span');
        wrapper.setAttribute('class', 'wrapper');
        var info = document.createElement('span');
        info.setAttribute('class', 'info');
        var text = this.getAttribute('text');
        info.textContent = text;

        var style = document.createElement('style');

        style.textContent = `
span {
  background: red;
}`;
        shadow.appendChild(style);
        shadow.appendChild(wrapper);
        wrapper.appendChild(info);
      }
    }
    customElements.define('popup-info', PopUpInfo);
  </script>
</body>

</html>